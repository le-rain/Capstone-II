% Call this function to find sections in audio with good consecutive peaks%

% Inputs:
% audio is name of audio files in this format: 'File/filename.ext'
% plotWholeAudioOption: 1 for plot of entire audio file
% plotOption -> 1 for graphs, 0 for no graphs

% Outputs:
% sectionT is sections of audio in seconds
% sectionI is sections of audio in sample#
% Fs is sampling frequency

function [sectionS2, Fs, audioData] = audioPulse(audio, plotWholeAudioOption, plotAudioSectionOption)

% Read audio from video and find peaks
[name, peaks, nSamples, y, Fs, minDist] = findAudioPeaks(audio);

% Find start and stop of good peak sections
[iStart, iEnd] = findAudioSection(peaks, nSamples, Fs);

% Find s1 and s2 peaks
[sectionS1, sectionS2] = findS1S2peaks(iStart, iEnd, y, Fs, minDist);

% Plot audio sections with s1 and s2 peaks
plotAudioSection(sectionS1, sectionS2, iStart, iEnd, name, y, Fs, minDist, plotWholeAudioOption, plotAudioSectionOption);

audioData = y;

end
